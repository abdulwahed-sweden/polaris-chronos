<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polaris Chronos â€” Islamic Prayer Time Engine</title>
  <meta name="description" content="Astronomical prayer times for any location on Earth, including polar regions with adaptive compensation and visibility-based Hijri calendar.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Readex+Pro:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css?v=2.0.0">
</head>
<body>

  <!-- ===== HEADER ===== -->
  <header class="polaris-header">
    <div class="container">
      <div class="header-inner">
        <a class="polaris-brand" href="/">
          <span class="brand-icon">&#9734;</span>
          Polaris Chronos
        </a>
        <nav class="header-nav">
          <a class="nav-link" href="/" data-route="calendar">Home</a>
          <a class="nav-link" href="/docs" data-route="docs">API Docs</a>
          <a class="nav-link nav-link-external" href="https://github.com/abdulwahed-sweden/polaris-chronos" target="_blank" rel="noopener">GitHub</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- ===== NOW DASHBOARD ===== -->
  <section id="now-dashboard" class="now-dashboard" style="display:none">
    <div class="container">
      <div class="now-inner">
        <div class="now-current">
          <span class="now-label">Current</span>
          <span id="now-prayer-name" class="now-prayer-name"></span>
        </div>
        <div class="now-next">
          <span class="now-label">Next</span>
          <span id="now-next-name" class="now-next-name"></span>
          <span id="now-countdown" class="now-countdown"></span>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="container main-content">

    <!-- Hero Search Section -->
    <section id="search-section" class="hero-search">
      <div class="search-bar-row">
        <div class="search-input-wrap">
          <span class="search-icon">&#128269;</span>
          <input type="text" id="city-input" class="search-input" placeholder="Search any city..." autocomplete="off" spellcheck="false">
          <div id="autocomplete-list" class="autocomplete-list"></div>
        </div>
        <button id="gps-btn" class="gps-btn" title="Auto-detect location">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/></svg>
        </button>
        <input type="date" id="date-input" class="date-input">
        <button id="go-btn" class="search-btn">Search</button>
      </div>
    </section>

    <!-- Error State -->
    <div id="error-state" class="error-state" style="display:none">
      <div class="error-icon">&#9888;</div>
      <p id="error-msg"></p>
    </div>

    <!-- Loading State -->
    <div id="loading-state" class="loading-state" style="display:none">
      <div class="skeleton-banner"></div>
      <div class="skeleton-table"></div>
    </div>

    <!-- ===== CALENDAR VIEW ===== -->
    <div id="calendar-view" style="display:none">

      <!-- City Dashboard Card -->
      <div class="city-dashboard">
        <div class="city-info">
          <h1 id="cal-loc-name" class="city-name"></h1>
          <div class="city-meta">
            <span id="cal-loc-tz" class="city-tz"></span>
            <span class="meta-dot">&middot;</span>
            <span id="cal-loc-coords" class="city-coords" title="Click to copy"></span>
          </div>
        </div>
        <div class="dual-date">
          <div class="date-hijri">
            <span class="date-label">Hijri</span>
            <span id="hijri-date-display" class="date-value-ar"></span>
          </div>
          <div class="date-gregorian">
            <span class="date-label">Gregorian</span>
            <span id="gregorian-date-display" class="date-value"></span>
          </div>
        </div>
      </div>

      <!-- Ramadan Header -->
      <div class="ramadan-header">
        <div class="ramadan-info">
          <h2 id="ramadan-title" class="ramadan-title"></h2>
          <p id="ramadan-dates" class="ramadan-dates"></p>
        </div>
        <button id="share-btn" class="share-btn" title="Share today's times">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
          Share
        </button>
      </div>

      <!-- View Mode Tabs -->
      <div class="view-controls">
        <div class="view-tabs">
          <button class="view-tab active" data-view="month">Month</button>
          <button class="view-tab" data-view="week">Week</button>
          <button class="view-tab" data-view="day">Day</button>
        </div>
        <label class="hijri-toggle">
          <input type="checkbox" id="hijri-mode" checked>
          <span class="toggle-slider"></span>
          <span class="toggle-label">Hijri Month</span>
        </label>
      </div>

      <!-- Method Legend -->
      <div id="method-legend" class="method-legend">
        <span class="legend-item"><span class="method-badge standard">Standard</span></span>
        <span class="legend-item"><span class="method-badge projected">Projected</span></span>
        <span class="legend-item"><span class="method-badge virtual-h">Virtual</span></span>
      </div>

      <!-- Calendar Table -->
      <div class="table-card">
        <div class="table-responsive">
          <table class="polaris-table">
            <thead>
              <tr>
                <th>Day</th>
                <th>Date</th>
                <th>Fajr</th>
                <th>Sunrise</th>
                <th>Dhuhr</th>
                <th>Asr</th>
                <th>Maghrib</th>
                <th>Isha</th>
              </tr>
            </thead>
            <tbody id="calendar-tbody"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ===== DAY DETAIL VIEW ===== -->
    <div id="day-view" style="display:none">
      <div class="city-dashboard compact">
        <div class="city-info">
          <h1 id="day-loc-name" class="city-name"></h1>
          <div class="city-meta">
            <span id="day-loc-tz" class="city-tz"></span>
            <span class="meta-dot">&middot;</span>
            <span id="day-loc-coords" class="city-coords" title="Click to copy"></span>
          </div>
        </div>
      </div>

      <div class="day-header">
        <div>
          <h2 id="day-title" class="day-title"></h2>
          <p id="day-subtitle" class="day-subtitle"></p>
        </div>
        <button id="day-share-btn" class="share-btn" title="Share today's times">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
          Share
        </button>
      </div>

      <div class="strategy-row">
        <button class="strat-btn active" data-value="projected45">Projected</button>
        <button class="strat-btn" data-value="strict">Strict</button>
      </div>

      <div id="day-strategy-note" class="strategy-note" style="display:none">
        <span class="strategy-note-icon"></span>
        <span id="day-strategy-text"></span>
      </div>

      <!-- Horizon Dial SVG -->
      <div class="polaris-card" id="horizon-dial-container" style="display:none">
        <div id="horizon-dial" class="horizon-dial"></div>
      </div>

      <!-- Prayer Table -->
      <div class="table-card">
        <div class="table-responsive">
          <table class="polaris-table">
            <thead>
              <tr>
                <th>Prayer</th>
                <th>Time</th>
                <th>Method</th>
                <th>Confidence</th>
              </tr>
            </thead>
            <tbody id="prayer-tbody"></tbody>
          </table>
        </div>
      </div>

      <!-- Solar Panel -->
      <div class="polaris-card solar-panel">
        <div class="solar-title">Solar Data</div>
        <div class="solar-grid">
          <div class="solar-item">
            <span class="solar-label">Max Altitude</span>
            <span id="solar-max" class="solar-value"></span>
          </div>
          <div class="solar-item">
            <span class="solar-label">Min Altitude</span>
            <span id="solar-min" class="solar-value"></span>
          </div>
          <div class="solar-item">
            <span class="solar-label">Solar Noon (UTC)</span>
            <span id="solar-peak" class="solar-value"></span>
          </div>
          <div class="solar-item">
            <span class="solar-label">Nadir (UTC)</span>
            <span id="solar-nadir" class="solar-value"></span>
          </div>
        </div>
      </div>

      <!-- Meta Row -->
      <div class="meta-row">
        <span class="meta-item">Strategy: <strong id="meta-strategy"></strong></span>
        <span class="meta-item">Source: <strong id="meta-source"></strong></span>
        <span class="meta-item">Confidence: <strong id="meta-confidence"></strong></span>
      </div>
    </div>

    <!-- ===== DOCS VIEW ===== -->
    <div id="docs-view" style="display:none"></div>

  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="polaris-footer">
    <div class="container">
      <span class="footer-brand">Polaris Chronos v1.0.0</span>
      <span class="footer-sep">&middot;</span>
      <span>Universal Prayer Time Engine</span>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/app.js?v=2.0.0"></script>
</body>
</html>

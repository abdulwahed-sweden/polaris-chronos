<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polaris Chronos â€” Islamic Prayer Time Engine</title>
  <meta name="description" content="Astronomical prayer times for any location on Earth, including polar regions with adaptive compensation and visibility-based Hijri calendar.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Readex+Pro:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            page: '#f8f9fb',
            surface: '#ffffff',
            muted: '#f1f3f5',
            brand: { DEFAULT: '#059669', hover: '#047857', light: '#d1fae5', dark: '#065f46' },
            navbar: '#111318',
            txt: { DEFAULT: '#1a1d23', secondary: '#4b5563', muted: '#6b7280', light: '#9ca3af' },
            border: { light: '#e8eaed', medium: '#d1d5db' },
            status: { success: '#059669', warning: '#d97706', danger: '#dc2626', info: '#3b82f6' }
          },
          fontFamily: {
            body: ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
            heading: ['Plus Jakarta Sans', 'system-ui', 'sans-serif'],
            arabic: ['Readex Pro', 'Inter', 'system-ui', 'sans-serif'],
            mono: ['JetBrains Mono', 'Fira Code', 'Consolas', 'monospace']
          },
          boxShadow: {
            xs: '0 1px 2px rgba(0,0,0,0.03)',
            card: '0 1px 3px rgba(0,0,0,0.04)',
            md: '0 6px 16px rgba(0,0,0,0.06)',
            lg: '0 12px 32px rgba(0,0,0,0.08)'
          },
          borderRadius: {
            btn: '10px',
            card: '12px'
          }
        }
      }
    }
  </script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <link rel="stylesheet" href="/style.css?v=4.0.0">
</head>
<body class="bg-page text-txt font-body text-[15px] leading-relaxed min-h-screen antialiased">

  <!-- ===== HEADER ===== -->
  <header class="bg-navbar sticky top-0 z-[1050] py-3">
    <div class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between">
        <a class="font-heading font-extrabold text-[1.3rem] tracking-tight text-white no-underline flex items-center gap-1.5 hover:text-white/85" href="/">
          <span class="text-brand text-[1.2rem]">&#9734;</span>
          Polaris Chronos
        </a>
        <nav class="header-nav flex items-center gap-1">
          <a class="nav-link text-white/70 font-medium text-[15px] px-3.5 py-2 rounded-lg no-underline transition-colors duration-200 border-b-2 border-transparent hover:text-white hover:bg-white/[0.08] flex items-center gap-1.5" href="/" data-route="calendar">
            <i data-lucide="calendar" class="w-4 h-4"></i> Home
          </a>
          <a class="nav-link text-white/70 font-medium text-[15px] px-3.5 py-2 rounded-lg no-underline transition-colors duration-200 border-b-2 border-transparent hover:text-white hover:bg-white/[0.08] flex items-center gap-1.5" href="/docs" data-route="docs">
            <i data-lucide="book-open" class="w-4 h-4"></i> API Docs
          </a>
          <a class="nav-link text-white/70 font-medium text-[15px] px-3.5 py-2 rounded-lg no-underline transition-colors duration-200 border-b-2 border-transparent hover:text-white hover:bg-white/[0.08] flex items-center gap-1.5" href="https://github.com/abdulwahed-sweden/polaris-chronos" target="_blank" rel="noopener">
            <i data-lucide="github" class="w-4 h-4"></i> GitHub
            <i data-lucide="external-link" class="w-3 h-3 opacity-50"></i>
          </a>
        </nav>
      </div>
    </div>
  </header>

  <!-- ===== NOW DASHBOARD ===== -->
  <section id="now-dashboard" class="now-dashboard bg-brand-dark py-4" style="display:none">
    <div class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between flex-wrap gap-4">
        <div>
          <span class="block text-[11px] font-semibold uppercase tracking-wider text-white/50 mb-0.5">Current</span>
          <span id="now-prayer-name" class="font-heading text-2xl font-bold text-white"></span>
        </div>
        <div class="text-right">
          <span class="block text-[11px] font-semibold uppercase tracking-wider text-white/50 mb-0.5">Next</span>
          <span id="now-next-name" class="text-lg font-semibold text-white/85 mr-3"></span>
          <span id="now-countdown" class="font-mono text-2xl font-medium text-brand-light tracking-wide tabular-nums"></span>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-8">

    <!-- Hero Search Section -->
    <section id="search-section" class="mb-6">
      <div class="flex items-center gap-2 max-w-[600px] mx-auto search-bar-row">
        <div class="relative flex-1 search-input-wrap">
          <span class="absolute left-3.5 top-1/2 -translate-y-1/2 text-txt-light pointer-events-none">
            <i data-lucide="search" class="w-[18px] h-[18px]"></i>
          </span>
          <input type="text" id="city-input" class="w-full bg-surface border-2 border-border-light text-txt font-body text-[15px] font-medium py-3 pl-11 pr-4 rounded-card outline-none transition-all duration-200 focus:border-brand focus:ring-4 focus:ring-brand/10 placeholder:text-txt-light" placeholder="Search any city..." autocomplete="off" spellcheck="false">
          <div id="autocomplete-list" class="autocomplete-list"></div>
        </div>
        <button id="gps-btn" class="gps-btn flex items-center gap-2 bg-surface border-2 border-border-light rounded-full text-txt-muted cursor-pointer transition-all duration-200 shrink-0 px-4 py-2.5 text-[14px] font-medium hover:border-brand hover:text-brand-hover hover:bg-brand/[0.03]" title="Auto-detect location">
          <i data-lucide="map-pin" class="w-4 h-4"></i>
          <span>My Location</span>
        </button>
        <input type="date" id="date-input" class="bg-surface border-2 border-border-light text-txt font-body text-[15px] py-2.5 px-3 rounded-card outline-none transition-all duration-200 focus:border-brand focus:ring-4 focus:ring-brand/10">
        <button id="go-btn" class="bg-brand border-none text-white font-semibold font-body text-[15px] py-3 px-6 rounded-btn cursor-pointer transition-all duration-200 whitespace-nowrap hover:bg-brand-hover hover:shadow-md">Search</button>
      </div>
    </section>

    <!-- Location Choice (GPS) -->
    <div id="location-choice" class="location-choice" style="display:none"></div>

    <!-- Error State -->
    <div id="error-state" class="text-center py-10 px-6 bg-status-danger/[0.03] border border-status-danger/10 rounded-card mb-4" style="display:none">
      <div class="mb-2 text-status-danger">
        <i data-lucide="alert-triangle" class="w-8 h-8 mx-auto"></i>
      </div>
      <p id="error-msg" class="text-status-danger text-base m-0"></p>
    </div>

    <!-- Loading State -->
    <div id="loading-state" style="display:none">
      <div class="skeleton-banner h-[90px] mb-4 rounded-card"></div>
      <div class="skeleton-table h-[400px] rounded-card"></div>
    </div>

    <!-- ===== CALENDAR VIEW ===== -->
    <div id="calendar-view" style="display:none">

      <!-- City Dashboard Card -->
      <div class="city-dashboard bg-surface border border-border-light border-l-4 border-l-brand rounded-card p-6 mb-5 shadow-card flex justify-between items-start gap-6 flex-wrap">
        <div>
          <h1 id="cal-loc-name" class="font-heading text-[1.75rem] font-extrabold text-txt tracking-tight leading-tight m-0"></h1>
          <div class="flex items-center gap-2 mt-1.5 text-[15px] text-txt-muted">
            <span id="cal-loc-tz" class="font-mono text-[13px]"></span>
            <span class="text-border-medium">&middot;</span>
            <span id="cal-loc-coords" class="city-coords font-mono text-[13px] cursor-pointer px-1.5 py-0.5 rounded transition-all duration-150 hover:bg-brand/[0.06] hover:text-brand-hover" title="Click to copy"></span>
          </div>
        </div>
        <div class="flex gap-5 shrink-0">
          <div class="text-center py-2.5 px-4 rounded-lg bg-brand/[0.03] border border-brand/25 min-w-[110px]">
            <span class="block text-[11px] font-semibold uppercase tracking-widest text-txt-muted mb-0.5">Hijri</span>
            <span id="hijri-date-display" class="font-arabic text-[15px] font-semibold text-brand-dark block"></span>
          </div>
          <div class="text-center py-2.5 px-4 rounded-lg bg-page border border-border-light min-w-[110px]">
            <span class="block text-[11px] font-semibold uppercase tracking-widest text-txt-muted mb-0.5">Gregorian</span>
            <span id="gregorian-date-display" class="font-body text-[15px] font-semibold text-txt block"></span>
          </div>
        </div>
      </div>

      <!-- Today Hero Banner -->
      <div id="today-hero" class="today-hero text-center py-4 mb-5 rounded-card" style="display:none">
        <p id="today-hero-text" class="font-heading text-[1.4rem] font-bold text-brand-dark tracking-tight m-0"></p>
      </div>

      <!-- Ramadan Header -->
      <div class="flex items-center justify-between mb-4 flex-wrap gap-3">
        <div>
          <h2 id="ramadan-title" class="font-heading text-2xl font-extrabold text-txt tracking-tight m-0"></h2>
          <p id="ramadan-dates" class="text-[15px] text-txt-muted mt-0.5 m-0"></p>
        </div>
        <button id="share-btn" class="share-btn inline-flex items-center gap-1.5 bg-surface border border-border-light text-txt-secondary font-body text-[13px] font-semibold py-2 px-4 rounded-btn cursor-pointer transition-all duration-200 hover:border-brand hover:text-brand-hover hover:bg-brand/[0.03]" title="Share today's times">
          <i data-lucide="share-2" class="w-4 h-4"></i>
          Share
        </button>
      </div>

      <!-- View Mode Tabs -->
      <div class="flex items-center justify-between mb-4 flex-wrap gap-3 view-controls">
        <div class="view-tabs flex border border-border-light rounded-btn overflow-hidden shadow-xs">
          <button class="view-tab bg-surface border-none py-2 px-5 text-[15px] font-body font-medium text-txt-secondary cursor-pointer transition-all duration-200 whitespace-nowrap" data-view="month">Month</button>
          <button class="view-tab active bg-surface border-none py-2 px-5 text-[15px] font-body font-medium text-txt-secondary cursor-pointer transition-all duration-200 whitespace-nowrap border-l border-l-border-light" data-view="week">Week</button>
          <button class="view-tab bg-surface border-none py-2 px-5 text-[15px] font-body font-medium text-txt-secondary cursor-pointer transition-all duration-200 whitespace-nowrap border-l border-l-border-light" data-view="day">Day</button>
        </div>
        <label class="hijri-toggle flex items-center gap-2 cursor-pointer select-none">
          <input type="checkbox" id="hijri-mode" class="hidden">
          <span class="toggle-slider"></span>
          <span class="text-[13px] font-semibold text-txt-secondary">Hijri Month</span>
        </label>
      </div>

      <!-- Method Legend -->
      <div id="method-legend" class="flex gap-3 mb-3 flex-wrap text-[13px]">
        <span><span class="method-badge standard">Standard</span></span>
        <span><span class="method-badge projected">Projected</span></span>
        <span><span class="method-badge virtual-h">Virtual</span></span>
      </div>

      <!-- Calendar Table -->
      <div class="bg-surface border border-border-light rounded-card overflow-hidden shadow-card mb-5">
        <div class="overflow-x-auto">
          <table class="polaris-table w-full text-txt text-[15px] border-collapse">
            <thead>
              <tr>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10 text-left">Date</th>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10 text-center">Hijri</th>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10 text-center">Fajr</th>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10 text-center">Sunrise</th>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10 text-center">Dhuhr</th>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10 text-center">Asr</th>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10 text-center">Maghrib</th>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10 text-center">Isha</th>
              </tr>
            </thead>
            <tbody id="calendar-tbody"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ===== DAY DETAIL VIEW ===== -->
    <div id="day-view" style="display:none">
      <div class="city-dashboard compact bg-surface border border-border-light border-l-4 border-l-brand rounded-card p-6 mb-4 shadow-card">
        <div>
          <h1 id="day-loc-name" class="font-heading text-[1.75rem] font-extrabold text-txt tracking-tight leading-tight m-0"></h1>
          <div class="flex items-center gap-2 mt-1.5 text-[15px] text-txt-muted">
            <span id="day-loc-tz" class="font-mono text-[13px]"></span>
            <span class="text-border-medium">&middot;</span>
            <span id="day-loc-coords" class="city-coords font-mono text-[13px] cursor-pointer px-1.5 py-0.5 rounded transition-all duration-150 hover:bg-brand/[0.06] hover:text-brand-hover" title="Click to copy"></span>
          </div>
        </div>
      </div>

      <div class="flex items-start justify-between mb-4 flex-wrap gap-3">
        <div>
          <h2 id="day-title" class="font-heading text-[1.35rem] font-bold text-txt tracking-tight m-0"></h2>
          <p id="day-subtitle" class="text-[15px] text-txt-muted mt-0.5 m-0"></p>
        </div>
        <button id="day-share-btn" class="share-btn inline-flex items-center gap-1.5 bg-surface border border-border-light text-txt-secondary font-body text-[13px] font-semibold py-2 px-4 rounded-btn cursor-pointer transition-all duration-200 hover:border-brand hover:text-brand-hover hover:bg-brand/[0.03]" title="Share today's times">
          <i data-lucide="share-2" class="w-4 h-4"></i>
          Share
        </button>
      </div>

      <div class="strategy-row flex border border-border-light rounded-btn overflow-hidden w-fit shadow-xs mb-4">
        <button class="strat-btn active" data-value="projected45">Projected</button>
        <button class="strat-btn" data-value="strict">Strict</button>
      </div>

      <div id="day-strategy-note" class="strategy-note" style="display:none">
        <span class="strategy-note-icon"></span>
        <span id="day-strategy-text"></span>
      </div>

      <!-- Horizon Dial SVG -->
      <div class="polaris-card" id="horizon-dial-container" style="display:none">
        <div id="horizon-dial" class="horizon-dial"></div>
      </div>

      <!-- Prayer Table -->
      <div class="bg-surface border border-border-light rounded-card overflow-hidden shadow-card mb-5">
        <div class="overflow-x-auto">
          <table class="polaris-table w-full text-txt text-[15px] border-collapse">
            <thead>
              <tr>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10">Prayer</th>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10">Time</th>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10">Method</th>
                <th class="bg-muted text-txt-secondary text-[11px] font-bold uppercase tracking-wider py-3.5 px-[18px] border-b-2 border-border-light whitespace-nowrap sticky top-0 z-10">Confidence</th>
              </tr>
            </thead>
            <tbody id="prayer-tbody"></tbody>
          </table>
        </div>
      </div>

      <!-- Solar Panel -->
      <div class="polaris-card">
        <div class="text-[11px] font-bold uppercase tracking-widest text-txt-muted mb-3 pb-2 border-b border-border-light">
          <i data-lucide="sparkles" class="w-3.5 h-3.5 inline-block mr-1 align-text-bottom"></i>
          Solar Data
        </div>
        <div class="grid grid-cols-4 gap-4 max-sm:grid-cols-2">
          <div class="flex flex-col gap-0.5">
            <span class="text-[11px] text-txt-light font-medium">Max Altitude</span>
            <span id="solar-max" class="font-mono text-base font-medium text-txt tabular-nums"></span>
          </div>
          <div class="flex flex-col gap-0.5">
            <span class="text-[11px] text-txt-light font-medium">Min Altitude</span>
            <span id="solar-min" class="font-mono text-base font-medium text-txt tabular-nums"></span>
          </div>
          <div class="flex flex-col gap-0.5">
            <span class="text-[11px] text-txt-light font-medium">Solar Noon (UTC)</span>
            <span id="solar-peak" class="font-mono text-base font-medium text-txt tabular-nums"></span>
          </div>
          <div class="flex flex-col gap-0.5">
            <span class="text-[11px] text-txt-light font-medium">Nadir (UTC)</span>
            <span id="solar-nadir" class="font-mono text-base font-medium text-txt tabular-nums"></span>
          </div>
        </div>
      </div>

      <!-- Meta Row -->
      <div class="flex gap-6 flex-wrap text-[13px] text-txt-muted px-1 mb-6">
        <span>Strategy: <strong id="meta-strategy" class="text-txt-secondary font-medium"></strong></span>
        <span>Source: <strong id="meta-source" class="text-txt-secondary font-medium"></strong></span>
        <span>Confidence: <strong id="meta-confidence" class="text-txt-secondary font-medium"></strong></span>
      </div>
    </div>

    <!-- ===== DOCS VIEW ===== -->
    <div id="docs-view" style="display:none"></div>

  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="text-center text-txt-light text-[13px] py-6 border-t border-border-light mt-8">
    <div class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8">
      <span class="font-semibold text-txt-muted">Polaris Chronos v4.0.0</span>
      <span class="mx-2 text-border-medium">&middot;</span>
      <span>Universal Prayer Time Engine</span>
    </div>
  </footer>

  <script src="/app.js?v=4.0.0"></script>
</body>
</html>
